# –§—É–Ω–∫—Ü–∏–∏-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã

## –°–∏–Ω—Ç–∞–∫—Å–∏—Å —Ñ—É–Ω–∫—Ü–∏–π-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ñ—É–Ω–∫—Ü–∏—é, –≤–æ–∑–≤—Ä–∞—â–∞—é—â—É—é –∫–≤–∞–¥—Ä–∞—Ç—ã –ø–µ—Ä–≤—ã—Ö N –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª:

```javascript
function getSquaresArr(n) {
    let result = [];
    for (let i = 1; i <= n; i++) {
        result.push(i**2);
    }
    return result;
}

const squaresArr = getSquaresArr(9);
for (const square of squaresArr) {
    console.log(square); // 1, 4, 9, ..., 64, 81
}
```

–ü–æ–¥–æ–±–Ω—ã–µ –∑–∞–¥–∞—á–∏ ‚Äì –ø–µ—Ä–µ–±—Ä–∞—Ç—å –≤ —Ü–∏–∫–ª–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã–π –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å) ‚Äì –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å –¥—Ä—É–≥–∏–º —Å–ø–æ—Å–æ–±–æ–º, —Å –ø–æ–º–æ—â—å—é —Ç.–Ω. –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤:

```javascript
function* getSquaresGen(n) {
    for (let i = 1; i <= n; i++) {
        yield i**2;
    }
}

const squaresGen = getSquaresGen(9);
for (const square of squaresGen) {
    console.log(square); // 1, 4, 9, ..., 64, 81
}
```

–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—Ç–ª–∏—á–∏–π —Ñ—É–Ω–∫—Ü–∏–π-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ –æ—Ç –æ–±—ã—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–≤–∞:
* –ø–æ—Å–ª–µ —Å–ª–æ–≤–∞ `function` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–≤—ë–∑–¥–æ—á–∫–∞
* –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –≤—ã–∑—ã–≤–∞—é—â–∏–π –∫–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `yield`, –∞ –Ω–µ `return`.

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Ñ—É–Ω–∫—Ü–∏–∏-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã

–î–ª—è –ø—Ä–∏–º–µ—Ä–∞ –≤–æ–∑—å–º—ë–º –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç—É—é —Ñ—É–Ω–∫—Ü–∏—é-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä:

```javascript
function* genDemo() {
    yield 1;
    yield 2;
    yield 3;
}
```

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π –∫–æ–¥ –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é ‚Äì –æ—Ç –Ω–∞—á–∞–ª–∞ –∏ –¥–æ `return`, —Ñ—É–Ω–∫—Ü–∏—è-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ —Ñ–≤–µ—Ä–Ω—ë—Ç –∑–Ω–∞—á–µ–Ω–∏–µ _**1**_ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è. –ü—Ä–∏ –≤—Ç–æ—Ä–æ–º ‚Äì –≤–µ—Ä–Ω—ë—Ç –∑–Ω–∞—á–µ–Ω–∏–µ _**2**_ –∏ —Ç–æ–∂–µ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è, –∏ —Ç.–¥. –¢.–µ. –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –µ—ë —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

## –ß—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ñ—É–Ω–∫—Ü–∏–∏-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã

–ï—Å–ª–∏ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º –≤ TypeScript –∏ –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–¥–∞—Ç—å —Ç–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –Ω–∞—à–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π, —Ç–æ –¥–ª—è –ø–µ—Ä–≤–æ–π –≤—Å—ë –æ—á–µ–≤–∏–¥–Ω–æ:

```TypeScript
function getSquaresArr(n: number): number[] {
```

–ï—Å–ª–∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–¥–µ–ª–∞—Ç—å —Ç–æ –∂–µ —Å–∞–º–æ–µ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞, —Ç–æ –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –ø–æ–ª—É—á–∏–º –æ—à–∏–±–∫—É:

```typescript
function* getSquaresGen(n: number): number[] {
```

![Typescript error](img/generators01.png)

–î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç-–∏—Ç–µ—Ä–∞—Ç–æ—Ä:
```javascript
function* getSquaresGen(n: number): IterableIterator<number> {
```

–ò–º–µ–Ω–Ω–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø–æ –Ω–∞–±–æ—Ä—É –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é —Ü–∏–∫–ª–∞ `for/of`.

–ú–∞—Å—Å–∏–≤ —Ç–æ–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å —ç—Ç–∏–º —Ü–∏–∫–ª–æ–º, —Ç.–∫. —É –Ω–µ–≥–æ –µ—Å—Ç—å —Å–≤–æ–π –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä:

```typescript
console.log(squaresArr[Symbol.iterator]); // [Function: values]
```

```typescript
const squaresArrIter: IterableIterator<number> = squaresArr[Symbol.iterator]();
for (const square of squaresArrIter) {
    console.log(square);
}
```

## –í –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã?

1. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–∏, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö.

2. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –Ω–µ —Ö—Ä–∞–Ω—è—Ç –≤—Å—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö, –∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∏—Ö –ø–æ –æ–¥–Ω–æ–º—É, –ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —ç–∫–æ–Ω–æ–º–∏—á–Ω–µ–µ –ø–æ –ø–∞–º—è—Ç–∏, –∏, –∫–∞–∫ —Å–ª–µ–¥—Å—Ç–≤–∏–µ, –ø–æ –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏—é.

–î–ª—è –ø—Ä–∏–º–µ—Ä–∞ –≤—ã–∑–æ–≤–µ–º 10 —Ç—ã—Å. —Ä–∞–∑ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ 999 –ø–µ—Ä–≤—ã—Ö –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª.

```javascript
console.time('Array');
for (let i = 0; i < 10_000; i++) {
    const z = getSquaresArr(999);
}
console.timeEnd('Array');

console.time('Generator');
for (let i = 0; i < 10_000; i++) {
    const z = getSquaresGen(999);
}
console.timeEnd('Generator');
```

–¢—Ä–∏ –∑–∞–º–µ—Ä–∞:

![Benchmarks](img/generators02.png)

## –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –≤ –º–∞—Å—Å–∏–≤

–ß—Ç–æ–±—ã –∏–∑–≤–ª–µ—á—å –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–µ–π-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º (–æ, —Ç–∞–≤—Ç–æ–ª–æ–≥–∏—è üòä), –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π `spread`:

```js
const arr = [...getSquaresGen(9)];
console.log(arr.length); // 9
console.log(arr); // [1,4,9,16,25,36,49,64,81]
```
